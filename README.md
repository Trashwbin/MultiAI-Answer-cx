# MultiAI Answer

<div align="center">
  <img src="icons/icon.png" alt="MultiAI Answer Logo" width="128">
  <p>基于多模型 AI 投票的智能答题助手，让答题更轻松、更准确</p>
  <p>
    <img src="https://img.shields.io/badge/version-1.0.2-blue.svg" alt="version">
    <img src="https://img.shields.io/badge/license-MIT-green.svg" alt="license">
  </p>
</div>

https://github.com/user-attachments/assets/e84fd061-df37-4767-8a38-5fedd8e6e54d

## 📖 功能特点

- 🤖 **多 AI 模型支持**
  - 支持 Kimi、通义千问等主流 AI 模型
  - 智能权重投票系统，提高答案准确性
  - 可自由配置启用/禁用不同 AI 模型

- 📝 **智能题目识别**
  - 自动识别多种题型（单选、多选、填空、判断）
  - 精准提取题目内容和选项
  - 支持复杂题型（简答题）

- 🎯 **答案智能处理**
  - 多模型答案对比和投票
  - 智能权重分配系统
  - 自动整理和格式化答案

- 🚀 **便捷功能**
  - 一键显示题目列表
  - 快速查看 AI 答案对比
  - 支持答案编辑和修改
  - 自动填写答案功能

## 🛠️ 安装说明

1. 下载最新版本的 Chrome 扩展文件 (.zip)
2. 解压下载的文件到本地文件夹
3. 打开 Chrome 浏览器，进入扩展管理页面：
   - 在地址栏输入：`chrome://extensions/`
   - 或者点击菜单 -> 更多工具 -> 扩展程序
4. 开启右上角的"开发者模式"
5. 点击"加载已解压的扩展程序"
6. 选择解压后的文件夹
7. 完成安装，扩展图标将显示在浏览器工具栏

## 💡 使用方法

### 基本使用

1. 进入题目页面后，点击整卷预览，再点击扩展图标
2. 选择以下功能之一：
   - 【显示题目列表】：查看所有题目
   - 【显示AI答案】：获取 AI 回答

### AI 配置

1. 点击【显示AI答案】后，会弹出 AI 配置窗口
2. 选择要启用的 AI 模型
3. 为重要的 AI 设置更高权重
4. 点击确定开始获取答案

### 答案处理

1. 查看各 AI 的答案
2. 系统会自动整合多个 AI 的答案
3. 可以手动编辑最终答案
4. 使用【自动填写】功能一键填入答案

## ⚙️ AI 实现逻辑

### 消息发送逻辑

1. **Kimi**
   - 使用 `data-testid="msh-chatinput-editor"` 定位输入框
   - 通过模拟粘贴事件输入内容
   - 优先使用回车键发送，备用方案点击发送按钮
   - 通过 `chat-segment` 元素监控回复状态

2. **DeepSeek**
   - 使用 `#chat-input` 定位输入框
   - 直接设置输入框值并触发事件
   - 使用回车键发送消息
   - 通过 `.ds-markdown--block` 元素监控回复

3. **通义千问**
   - 使用 `textarea[placeholder="千事不决问通义"]` 定位输入框
   - 直接设置值并触发输入事件
   - 使用回车键发送
   - 通过 `.answerItem--` 和工具栏状态监控回复

4. **智谱清言**
   - 使用 `.input-box-inner textarea` 定位输入框
   - 模拟焦点和输入事件
   - 点击发送按钮发送
   - 通过 `.answer` 和 `.markdown-body` 监控回复

5. **豆包**
   - 使用 `[data-testid="chat_input_input"]` 定位输入框
   - 设置值并等待发送按钮启用
   - 点击发送按钮发送
   - 通过 `[data-testid="receive_message"]` 监控回复

6. **文心一言**
   - 使用 `.yc-editor[contenteditable="true"]` 定位输入框
   - 使用剪贴板API模拟粘贴
   - 优先点击发送按钮，备用回车发送
   - 通过 `.dialogue_card_item` 监控回复

### 终止逻辑

每个 AI 都实现了以下终止判断：
- 检测停止按钮消失
- 监控内容稳定性（连续多次内容相同）
- 设置最大等待时间（60秒）
- 出现复制按钮等完成标志

### 答案提取逻辑

统一的答案处理流程：
1. 处理有序列表（添加序号和换行）
2. 处理无序列表（添加符号和换行）
3. 处理代码块（移除行号和操作按钮）
4. 规范化空行和格式
5. 移除多余的空白字符

## 🧪 测试功能

访问 `chrome-extension://<扩展ID>/test/test.html` 可以进行功能测试：

1. 选择要测试的 AI 模型
2. 输入测试问题
3. 点击【开始测试】
4. 实时查看各 AI 的回答状态和内容
5. 使用【清除结果】重置测试

## ⚙️ 支持的题型

- 单选题
- 多选题
- 判断题
- 填空题
- 简答题
- 其他题型

## 📋 注意事项

1. 使用前请确保：
   - 已登录相关 AI 平台账号
   - 网络连接正常
   - 浏览器已授予必要权限

2. 为了获得最佳体验：
   - 建议同时启用多个 AI 模型
   - 为最可靠的 AI 设置更高权重
   - 在自动填写前检查答案正确性

## 🔒 隐私说明

- 本扩展不会收集任何个人信息
- 不会记录或上传答题数据
- 所有操作均在本地完成
- AI 对话内容仅在对应平台进行

## 🔄 更新日志

### v1.0.2
- 优化各 AI 模型的消息处理逻辑
- 改进答案提取和格式化
- 添加测试功能说明
- 完善文档

### v1.0.1
- 优化多个 AI 模型的响应处理
- 改进答案解析和展示效果
- 修复已知问题
- 提升整体稳定性

### v1.0.0
- 首次发布
- 支持基础题型识别
- 集成多个 AI 模型
- 实现答案投票系统

## 👨‍💻 开发者

- GitHub: [Trashwbin](https://github.com/trashwbin)
- Gitee: [Trashwbin](https://gitee.com/trashwbin)

## 📄 许可证

本项目基于 MIT 许可证开源，详见 [LICENSE](LICENSE) 文件。 